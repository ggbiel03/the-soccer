<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Soccer Store</title>
    <link
      rel="shortcut icon"
      href="/src/images/icon/ico.png"
      type="image/x-icon"
    />
    <link rel="stylesheet" href="/global.css" />

    <script src="/src/scripts/scripts.js" defer></script>
  </head>

  <body>
    <!-- Inicio Header -->
    <header class="header" id="header"></header>
    <!-- Fim da Header -->

    <!-- Início Banner Loja -->
    <div class="banner-loja">
      <h2 class="banner-loja_nome">
        Camisas Oficiais<strong>Times Paulistas 2025</strong>
      </h2>
    </div>
    <!-- Fim Banner Loja -->

    <main class="container">
      <div class="produtos">
        <ol class="mapa">
          <li><a href="/index.html">Home</a></li>
          <li>Shop</li>
        </ol>
        <div class="produtos_pesquisa">
          <input
            type="text"
            id="pesquisa"
            placeholder="Pesquisar camisa..."
            onkeyup="filtrarProdutos()"
          />
        </div>

        <div class="produtos_itens" id="shop-dinamico">
          <!-- Produtos do backend serão carregados dinamicamente aqui -->
        </div>
      </div>
    </main>
    <!-- Footer -->
    <div id="footer"></div>

    <script>
      async function carregarShop() {
        const container = document.getElementById('shop-dinamico');
        if (!container) return;
        try {
          const resp = await fetch('https://sua-api.com/camisetas');
          if (!resp.ok) throw new Error('Erro ao buscar produtos');
          const camisetas = await resp.json();
          container.innerHTML = '';
          if (camisetas.length > 0) {
            camisetas.forEach(c => {
              const a = document.createElement('a');
              a.className = 'camiseta-item';
              a.href = c.link || '#';
              a.innerHTML = `
                <article class="produtos_produto">
                  <img src="${c.imagem}" class="produtos_imagem" alt="${c.nome}">
                  <h3 class="produtos_nome">${c.nome}</h3>
                  <div class="produtos_preco">R$ <span class="valor-produto">${Number(c.preco).toFixed(2)}</span> no Pix</div>
                  <div class="produtos_parcelas">ou R$ <span class="valor-parcelado">${(Number(c.preco) * 1.1).toFixed(2)}</span> em até <span class="parcelas">7</span>x</div>
                </article>
              `;
              container.appendChild(a);
            });
          }
        } catch (e) {
          // Não sobrescreve os produtos estáticos, apenas exibe erro se necessário
          const erro = document.createElement('p');
          erro.textContent = 'Erro ao carregar produtos do backend.';
          erro.style.color = 'red';
          container.appendChild(erro);
        }
      }
      carregarShop();
    </script>
  </body>
</html>
